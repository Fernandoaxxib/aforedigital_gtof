<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<ui:composition template="layaut2.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

	<f:metadata>
		<f:event listener="#{modDesempParc.iniciar}" type="preRenderView" />
	</f:metadata>

	<ui:define name="left">
		<ui:include src="graficas.xhtml" />
	</ui:define>

	<ui:define name="center">
		<h:outputStylesheet name="estilo-base.css" library="css" />

		<p:panelGrid class="no-border no-padding" style="width: 100%">
			<p:row>
				<p:column>
					<ui:include src="subMenuTransacciones.xhtml" />
				</p:column>
				<p:column>
					<h:form>
						<p:linkButton styleClass="blue ui-button-text"
							outcome="/api/modDesParc.jsf" includeViewParams="true"
							value="#{msg.modulo_desempleoParc_btnPM}">
							<f:param name="init" value="true" />
						</p:linkButton>
						
						<p:linkButton styleClass="green ui-button-text"
							outcome="/api/modDesempParc.jsf" includeViewParams="true"
							value="Proceso individual">
							<f:param name="init" value="true" />
						</p:linkButton>

						<p:linkButton styleClass="blue ui-button-text"
							outcome="/api/modDesParcReportes.jsf" includeViewParams="true"
							value="#{msg.modulo_desempleoParc_btnReportes}">
							<f:param name="init" value="true" />
						</p:linkButton>

						<p:linkButton styleClass="blue ui-button-text"
							outcome="/api/modDesParcLProcesar.jsf" includeViewParams="true"
							value="#{msg.modulo_desempleoParc_btnLProcesar}">
							<f:param name="init" value="true" />
						</p:linkButton>
					</h:form>
				</p:column>
			</p:row>
		</p:panelGrid>





		<p:messages id="messages" showDetail="true" closable="true">
			<p:autoUpdate />
		</p:messages>

		<h:form id="form">


			<p:panel id="datos" header="Desempleo parcialidades"
				style="margin-top:20px">
				<h:panelGrid id="solicitud" columns="6" cellpadding="10"
					width="100%">
					<p:outputLabel value="#{msg.modDesParc_solicitud_nss}"
						style="font-weight: bold" />
					<h:panelGrid columns="2">
						<p:inputText required="true" requiredMessage="NSS es requerido"
							value="#{modDesempParc.nss}" style="width:90px"></p:inputText>
						<p:commandButton class="blue" update="form formCan"
							action="#{modDesempParc.consultarSolicitud}" type="submit"
							value="#{msg.modDesParc_boton_buscarNss}" />
					</h:panelGrid>

					<p:outputLabel value="#{msg.modDesParc_solicitud_numSolicitud}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.noSolicitud}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_curp}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.curp}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_rfc}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.rfc}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_aPaterno}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.primerApellido}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_aMaterno}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.segundoApellido}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_nombres}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.nombre}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_tipoPago}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.clasificacionPago}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_estatusSolicitud}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.estatusSolicitud}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_fondo}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.fondo}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_numResolucion}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.numResolucion}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_totalPrestacion}"
						style="font-weight: bold" />
					<h:outputText value="#{modDesempParc.datosSol.monTotalPrestacion}">
						<f:convertNumber type="currency" currencySymbol="$"
							maxFractionDigits="2" />
					</h:outputText>

					<p:outputLabel value="#{msg.modDesParc_solicitud_remanente}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.remanente}">
						<f:convertNumber type="currency" currencySymbol="$"
							maxFractionDigits="2" />
					</p:outputLabel>

					<p:outputLabel value="#{msg.modDesParc_solicitud_sbcA}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.sbcTipoA}" />

					<p:outputLabel value="#{msg.modDesParc_solicitud_fechaAccion}"
						style="font-weight: bold" />
					<p:outputLabel value="#{modDesempParc.datosSol.fechaAccion}">
						<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
					</p:outputLabel>

				</h:panelGrid>
			</p:panel>

			<p:panel id="detalle" header="Detalle de Parcialidades"
				style="margin-top:20px">
				<p:dataTable id="parcialidadesTable" var="par" scrollable="true"
					emptyMessage="#{msg.aprob_msj_sinDatos}"
					value="#{modDesempParc.parcialidades}" selectionMode="single"
					selection="#{modDesempParc.selectedParcialidad}"
					rowKey="#{par.pago}">

					<p:ajax event="rowSelect" update="form" />

					<p:column headerText="#{msg.modDesParc_parcialidades_pago}"
						style="width:50px">
						<h:outputText value="#{par.pago}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_importe}"
						style="width:100px">
						<h:outputText value="#{par.totalPago}" style="float:right">
							<f:convertNumber type="currency" currencySymbol="$" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_fecha}"
						style="width:150px">
						<h:outputText value="#{par.fecha}" style="float:right">
							<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_estatusPago}"
						style="width:100px">
						<h:outputText value="#{par.estatusPagDescrip}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_trabFechaAut}"
						style="width:150px">
						<h:outputText value="#{par.fechaManifiestoTrab}"
							style="float:right">
							<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_trabajador}"
						style="text-align: center; width:50px">
						<h:outputText value="#{par.autorizaTrabajador}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_imssFechaEnv}"
						style="width:150px">
						<h:outputText value="#{par.fechaEnvAutorizaImss}"
							style="float:right">
							<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_imssFechaAut}"
						style="width:150px">
						<h:outputText value="#{par.fechaAutorizaImss}" style="float:right">
							<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_imss}"
						style="text-align: center; width:50px">
						<h:outputText value="#{par.autorizaImss}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_tipoPago}"
						style="width:150px">
						<h:outputText value="#{par.tipo_pago}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_parcialidades_clabe}"
						style="width:200px">
						<h:outputText value="#{par.dpCuenta}" />
					</p:column>
				</p:dataTable>
			</p:panel>

			<p:panel id="admin" header="Datos Administrativos"
				style="margin-top:20px">
				<p:dataTable id="administrativoTable" var="adm"
					emptyMessage="#{msg.aprob_msj_sinDatos}"
					value="#{modDesempParc.administrativos}">

					<p:ajax event="rowSelect" update="form" />

					<p:column headerText="#{msg.modDesParc_administrativos_pago}">
						<h:outputText value="#{adm.descripcionPago}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_administrativos_subcuenta}">
						<h:outputText value="#{adm.subcuenta}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_administrativos_acciones}">
						<h:outputText value="#{adm.montoAccion}" style="float:right">
							<f:convertNumber type="currency" currencySymbol="$"
								maxFractionDigits="2" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_administrativos_importe}">
						<h:outputText value="#{adm.montoPesos}" style="float:right">
							<f:convertNumber type="currency" currencySymbol="$"
								maxFractionDigits="2" />
						</h:outputText>
					</p:column>

					<p:column
						headerText="#{msg.modDesParc_administrativos_estatusPago}"
						style="text-align: center">
						<h:outputText value="#{adm.estatusPago}" />
					</p:column>

				</p:dataTable>
			</p:panel>

			<p:panel id="marcas" header="Marcas" style="margin-top:20px">
				<p:dataTable id="marcasTable" var="mar"
					emptyMessage="#{msg.aprob_msj_sinDatos}"
					value="#{modDesempParc.marcas}">

					<p:ajax event="rowSelect" update="form" />

					<p:column headerText="#{msg.modDesParc_marcas_cuenta}">
						<h:outputText value="#{mar.codCuenta}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_marcas_cve}">
						<h:outputText value="#{mar.claveProceso}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_marcas_proceso}">
						<h:outputText value="#{mar.descripcion}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_marcas_incluidoPor}">
						<h:outputText value="#{mar.incluidoPor}" />
					</p:column>

					<p:column headerText="#{msg.modDesParc_marcas_fInicio}">
						<h:outputText value="#{mar.fechaInicio}" style="float:right">
							<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_marcas_fFin}">
						<h:outputText value="#{mar.fechaFin}" style="float:right">
							<f:convertDateTime pattern="dd-MM-yyyy HH:mm" />
						</h:outputText>
					</p:column>

					<p:column headerText="#{msg.modDesParc_marcas_estado}">
						<h:outputText value="#{mar.estado}" />
					</p:column>

				</p:dataTable>
			</p:panel>

		</h:form>

		<h:form id="formCan">
			<p:panel id="acciones" header="Acciones" style="margin-top:20px">
				<h:panelGrid columns="3" width="80%">
					<p:outputLabel value="#{msg.modDesParc_combo_tipoCancelacion}"
						style="float:right" />

					<p:selectOneMenu required="true" id="tipoCancelacion"
						requiredMessage="Tipo cancelaciÃ³n es requerido"
						style="width:200px"
						value="#{modDesempParc.selectedClaveCancelacion}">
						<f:selectItem itemLabel="#{msg.modDesParc_combo_default}"
							itemValue="" />
						<f:selectItems value="#{modDesempParc.listaCancelacion}" var="c"
							itemLabel="#{c.descripcion}" itemValue="#{c.claveProceso}" />
					</p:selectOneMenu>

					<p:commandButton class="blue"
						action="#{modDesempParc.cancelarSolicitud}" type="submit"
						value="#{msg.modDesParc_boton_cancelarSolicitud}" />
				</h:panelGrid>
			</p:panel>
		</h:form>

	</ui:define>


</ui:composition>