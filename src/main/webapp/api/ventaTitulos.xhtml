<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>

<h:body>
	<h:outputScript name="js/calendar-localization.js" />
	<p:messages id="messages" showDetail="true" closable="true">
		<p:autoUpdate />
	</p:messages>

	<h:form id="form">
		<p:outputLabel value="Fecha Corte" />
		<p:datePicker id="fechaInicial" value="#{ventaTitulos.fechaInicial}"
			showIcon="true" locale="es" pattern="dd-MM-yyyy"
			mindate="#{ventaTitulos.fechaActual}" readonlyInput="true" />

		<p:datePicker id="fechaFinal" value="#{ventaTitulos.fechaFinal}"
			showIcon="true" locale="es" pattern="dd-MM-yyyy"
			mindate="#{ventaTitulos.fechaActual}" readonlyInput="true" />


		<p:outputPanel id="customPanel">
			<p:selectOneRadio id="customRadio" value="#{ventaTitulos.opcion}"
				layout="custom">
				<f:selectItem itemLabel="Todos" itemValue="T" />
				<f:selectItem itemLabel="Retiros" itemValue="R" />
				<f:selectItem itemLabel="Traspasos" itemValue="A" />
				<f:selectItem itemLabel="Lote" itemValue="V" />
				<f:selectItem itemLabel="Lote Corte" itemValue="L" />
			</p:selectOneRadio>

			<h:panelGrid columns="3" cellpadding="5">
				<p:radioButton id="opt1" for="customRadio" itemIndex="0" />
				<h:outputLabel for="opt1" value="Todos los módulos" />
				<h:outputLabel value="" />

				<p:radioButton id="opt2" for="customRadio" itemIndex="1" />
				<h:outputLabel for="opt2" value="Retiros" />
				<p:selectOneMenu style="width:100px"
					value="#{ventaTitulos.selectedTipoRetiro}">
					<f:selectItem itemLabel="#{msg.modDesParc_combo_default}"
						itemValue="" />
					<f:selectItems value="#{ventaTitulos.tipoRetiros}" var="c"
						itemLabel="#{c.descripcion}" itemValue="#{c.descripcion}" />
				</p:selectOneMenu>

				<p:radioButton id="opt3" for="customRadio" itemIndex="2" />
				<h:outputLabel for="opt3" value="Traspasos Afore-Afore" />
				<p:selectOneMenu style="width:100px"
					value="#{ventaTitulos.selectedLoteTraspaso}">
					<f:selectItem itemLabel="#{msg.modDesParc_combo_default}"
						itemValue="" />
					<f:selectItems value="#{ventaTitulos.loteTraspasos}" var="c"
						itemLabel="#{c.montoMovimiento}" itemValue="#{c.idLote}" />
				</p:selectOneMenu>

				<p:radioButton id="opt4" for="customRadio" itemIndex="3" />
				<h:outputLabel for="opt4" value="Dev pago excs lote" />
				<p:selectOneMenu style="width:100px"
					value="#{ventaTitulos.selectedrgDevExces}">
					<f:selectItem itemLabel="#{msg.modDesParc_combo_default}"
						itemValue="" />
					<f:selectItems value="#{ventaTitulos.rgDevExces}" var="c"
						itemLabel="#{c.montoMovimiento}" itemValue="#{c.idLote}" />
				</p:selectOneMenu>
				
				<p:radioButton id="opt5" for="customRadio" itemIndex="4" />
				<h:outputLabel for="opt5" value="Lote corte" />
				<p:inputText id="lote" value="#{ventaTitulos.lote}" style="width:120px"></p:inputText>
			</h:panelGrid>
		</p:outputPanel>

		

		<p:commandButton action="#{ventaTitulos.buscarMontos}"
			type="submit" value="Buscar" ajax="false" />
			
		<p:commandButton action="#{ventaTitulos.ventaTitulosMonitor}" rendered="#{ventaTitulos.mostrarVenta}"
			type="submit" value="Venta en monitor" ajax="false" />

		<p:commandButton action="#{ventaTitulos.ventaTitulosMonitorCT}" rendered="#{ventaTitulos.mostrarVentaCT}"
			type="submit" value="Venta en monitor corte trans" ajax="false" />


		<p:dataTable id="ventaTable" var="ven" value="#{ventaTitulos.montos}"
			rows="10" paginator="true" rowsPerPageTemplate="5,10,15" selectionMode="single"
			selection="#{ventaTitulos.selectedSiefore}" rowKey="#{ven.siefore}" >

			<p:ajax event="rowSelect" update="form" />

			<p:column headerText="Siefore">
				<h:outputText value="#{ven.siefore}" />
			</p:column>

			<p:column headerText="Monto total">
				<h:outputText value="#{ven.totVender}" />
			</p:column>

			<p:column headerText="Valor cuota">
				<h:outputText value="#{ven.valCuota}" />
			</p:column>

			<p:column headerText="Total cuotas">
				<h:outputText value="#{ven.totCuotas}" />
			</p:column>
			
			<p:column headerText="Pesos fracc afore">
				<h:outputText value="#{ven.retiroAforeMND}" />
			</p:column>
			
			<p:column headerText="Fracción afore">
				<h:outputText value="#{ven.retiroAforeTIT}" />
			</p:column>
			
			<p:column headerText="Total cuotas vender">
				<h:outputText value="#{ven.totGeneralCuotas}" />
			</p:column>
		</p:dataTable>

	</h:form>

</h:body>
</html>