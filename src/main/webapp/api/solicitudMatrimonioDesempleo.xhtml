<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<ui:composition template="layaut.xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

	<f:metadata>
		<f:event listener="#{solicitudMatrimonioDesempleo.iniciar}" type="preRenderView" />
	</f:metadata>

<!-- 	<ui:define name="left"> -->
<!-- 		<ui:include src="graficas.xhtml" /> -->
<!-- 	</ui:define> -->

	<ui:define name="center">
	<h:outputScript name="js/calendar-localization.js" />
		<p:panelGrid width="100%" styleClass="ui-noborder">
			<p:row>
				<p:column>
					<ui:include src="menu.xhtml" />
				</p:column>
				<p:column style="margin-left:50px">
					<ui:include src="subMenuReportes.xhtml" />
				</p:column>
			</p:row>
		</p:panelGrid>
		

		
	<h:form id="form">


	<p:panel id="busqueda" header="Solicitudes de Matrimonio y Desempleo" style="margin-top:20px">
		
				
				<p:panelGrid id="solicitud" styleClass="ui-noborder"  style="margin-top:20px; width:100%;">
									
					<p:row>					
			     	<p:column>
							<p:outputLabel  value="NSS:"  style="font-weight: bold"/>
						</p:column>
						<p:column>
							<p:inputText id="nss" value="#{solicitudMatrimonioDesempleo.nss}" style="width:100px" ></p:inputText>
							<p:commandButton class="blue"  actionListener="#{solicitudMatrimonioDesempleo.consultar}"
								 update="form solicitud result busqueda pSolicitud pPago" value="Buscar" />
						</p:column>
						
						<p:column>
							<p:outputLabel value="Nombre:" style="font-weight: bold"></p:outputLabel>
						</p:column>
						<p:column>
							<h:outputText value="#{solicitudMatrimonioDesempleo.nombre}"></h:outputText>
						</p:column>
						
						<p:column>
							<p:outputLabel value="Cod Cuenta:" style="font-weight: bold"></p:outputLabel>
						</p:column>
						<p:column>
							<h:outputText value="#{solicitudMatrimonioDesempleo.cuenta}"></h:outputText>
						</p:column>
						
						<p:column>
							<p:commandButton class="blue" actionListener="#{solicitudMatrimonioDesempleo.botonDatosCheque}" rendered="#{solicitudMatrimonioDesempleo.verDatoCheque}" process="nss"
								  update="result busqueda pSolicitud pPago" value="Ver Datos Cheque" />
								  
							
						</p:column>
					</p:row>	
					
						
						
						
								
				</p:panelGrid>
				
  		
 	</p:panel>
 
 	<p:panel id="pSolicitud" header="Solicitud Matrimonio,Desempleo" style="margin-top:20px">
 		
 		<p:dataTable id="verSolicitudMatrimonio"  var="verSolicitud" scrollable="true" scrollHeight="250"
			paginatorPosition="bottom"
					emptyMessage="#{solicitudMatrimonioDesempleo.mensajeTabla}"
			 value="#{solicitudMatrimonioDesempleo.listSolicitudChequeOut}"  rows="10" paginator="true"
					rowsPerPageTemplate="5,10,15"
					selection="#{solicitudMatrimonioDesempleo.selectSolicitudChequeOut}" rowKey="#{verSolicitud.numeroSolicitud}">
		    
					<f:facet name="header" style="float:right">

						<h:outputLabel for="registros"
							value="#{msg.aprob_label_totalRegistros}"  />
						<h:outputText id="totalRegistros"
							value="#{solicitudMatrimonioDesempleo.totalSolicitud}" />

					</f:facet>
		    
<!-- 		    		<p:ajax event="rowSelectCheckbox" update="form:pSolicitud" /> -->
<!-- 		    		<p:column selectionMode="single" style="width:20px;text-align:center"/> -->
		    		
			 <p:column headerText="#{msg.cheque_ver_columna_RightFax}">
		        <h:outputText value="#{verSolicitud.rightFax}" />
		    </p:column>		
		    
		    <p:column headerText="#{msg.cheque_ver_columna_fechaOperacion}">
		        <h:outputText value="#{verSolicitud.fechaOperacion}" >
		        <f:convertDateTime type="date" pattern="dd/MM/yyyy" />
				</h:outputText>
		    </p:column>
		 
		    <p:column headerText="#{msg.cheque_ver_columna_diagnostico}">
		        <h:outputText value="#{verSolicitud.diagnosticoCuenta}" />
		    </p:column>
		    
		    <p:column headerText="#{msg.cheque_ver_columna_prestamo}">
		        <h:outputText value="#{verSolicitud.tipoPrestacion}" />
		    </p:column>
		 
		    <p:column headerText="#{msg.cheque_ver_columna_NoSolicitud}">
		        <h:outputText value="#{verSolicitud.numeroSolicitud}" />
		    </p:column>
		 	
		 	<p:column headerText="#{msg.cheque_ver_columna_fechaSolicitud}">
		        <h:outputText value="#{verSolicitud.fechaTraspaso}" />
		    </p:column>
		 
		    <p:column headerText="#{msg.cheque_ver_columna_folioSolicitud}">
		        <h:outputText value="#{verSolicitud.fechaPago}" />
		    </p:column>
		    
		    <p:column headerText="#{msg.cheque_ver_columna_NoResolucion}">
		        <h:outputText value="#{verSolicitud.numeroResolucion}" />
		    </p:column>
		    
		    
		    <p:column headerText="#{msg.cheque_ver_columna_fechaResolucion}">
		        <h:outputText value="#{verSolicitud.fechaSolicitud}" />
		    </p:column>
		    
		     <p:column headerText="#{msg.cheque_ver_columna_fechaPension}">
		        <h:outputText value="#{verSolicitud.consecutivo}" />
		    </p:column>
		    
		    <p:column headerText="#{msg.cheque_ver_columna_Ejecucion}">
		        <h:outputText value="#{verSolicitud.numeroEmpleado}" />
		    </p:column>
		 
		   
		 	
		</p:dataTable>
 		
 	</p:panel>
 	<p:panel id="pPago" header="Pagos Efectuados" style="margin-top:20px">
			
			<p:dataTable id="verPagosEfectuados"  var="verPago"  scrollable="true" scrollHeight="250" paginatorPosition="bottom"
					emptyMessage="#{verDatosCheque.mensajeTabla}"
			 value="#{solicitudMatrimonioDesempleo.listPagoChequeOut}"  rows="10" paginator="true"
					rowsPerPageTemplate="5,10,15" >
		    		    
					
					<f:facet name="header" style="float:right">
						<h:outputLabel for="registros"  value="#{msg.aprob_label_totalRegistros}"  />
						<h:outputText id="totalRegistros" value="#{solicitudMatrimonioDesempleo.totalPago}" />

					</f:facet>
					
				<p:column headerText="#{msg.cheque_pago_columna_Identificador}">
		        <h:outputText value="#{verPago.identificarOperacion}" />
		        </p:column>
		        
		        <p:column headerText="#{msg.cheque_pago_columna_Seguro}">
		        <h:outputText value="#{verPago.tipoSeguro}" />
		    </p:column>
		    
		   <p:column headerText="Pension">
		        <h:outputText value="#{verPago.tipoPension}" />
		    </p:column>
		 
		    <p:column headerText="#{msg.cheque_pago_columna_Prestacion}">
		        <h:outputText value="#{verPago.tipoPrestacion}" />
		    </p:column>
		 	
		 	<p:column headerText="#{msg.cheque_pago_columna_FechaOperacion}">
		        <h:outputText value="#{verPago.fechaOperacion}" />
		    </p:column>
		 
		    <p:column headerText="#{msg.cheque_pago_columna_MontoPago}">
		        <h:outputText value="#{verPago.importeAutorizado}" />
		    </p:column>
		    
		    <p:column headerText="#{msg.cheque_pago_columna_ImporteRCV}">
		        <h:outputText value="#{verPago.importeSubcontrato}" />
		    </p:column>
		    
		     <p:column headerText="#{msg.cheque_pago_columna_Pension}">
		        <h:outputText value="#{verPago.codCuenta}" />
		    </p:column>
		    
		    <p:column headerText="#{msg.cheque_pago_columna_FechaOperacion}">
		        <h:outputText value="#{verPago.fechaRespuesta}" />
		    </p:column>
		 
		    <p:column headerText="#{msg.cheque_pago_columna_Solicitud}">
		        <h:outputText value="#{verPago.solicitud}" />
		    </p:column>
		    
		    <p:column headerText="#{msg.cheque_pago_columna_Diag17}">
		        <h:outputText value="#{verPago.op17}" />
		    </p:column>
			
			<p:column  align="center" style="width:20px;">
                       					 <p:commandButton id="verFopago" update=":form:display :form:result" oncomplete="PF('productDialog').show()"
                                          action="#{solicitudMatrimonioDesempleo.consultarFopagos}" icon="ui-icon-search" class="blue">
                           				 <f:setPropertyActionListener  value="#{verPago}" ajax="false" class="blue"
                                                         target="#{solicitudMatrimonioDesempleo.pagoChequeOut}"/>
                                         <p:tooltip for="verFopago" value="Ver Fopago" showEffect="clip" hideEffect="fold" />
                       					 </p:commandButton>
             </p:column>
		
		
		</p:dataTable>
		
		
		
		
		  
		
						
							
  </p:panel>
		
				<p:dialog header="Consulta de Pagos" widgetVar="productDialog"  appendTo="@(body)"   resizable="false" width="80%" modal="true" style="font-size:12px">
						 <p:outputPanel id="display">
					
					 <p:panelGrid id="verNombre" styleClass="ui-noborder" 	style="margin-top:20px; width:100%;">	
						
						<p:row>					
			     		<p:column  style="width:20px">
							<p:outputLabel  value="Poliza"  style="font-weight: bold"/>
						</p:column>
						<p:column  style="width:20px">
						<h:outputText value="#{solicitudMatrimonioDesempleo.fopagos.PNoPoliza_Pag}"></h:outputText>
						</p:column>
						<p:column  style="width:20px">
							<p:outputLabel  value="No. Referencia"  style="font-weight: bold"/>
						</p:column>
						<p:column  style="width:20px">
						<h:outputText value="#{solicitudMatrimonioDesempleo.fopagos.PReferencia}"></h:outputText>
						</p:column>
						</p:row>	
						<p:row>					
			     		<p:column  style="width:20px">
							<p:outputLabel  value="Fecha Cheque"  style="font-weight: bold"/>
						</p:column>
						<p:column  style="width:20px">
							<h:outputText value="#{solicitudMatrimonioDesempleo.fopagos.PFechaMov_Pag}">
							<f:convertDateTime type="date" pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>
						<p:column  style="width:20px">
							<p:outputLabel  value="Fecha Reinversion"  style="font-weight: bold"/>
						</p:column>
						<p:column  style="width:20px">
							<h:outputText value="#{solicitudMatrimonioDesempleo.fopagos.PFecReinv_Pag}">
							<f:convertDateTime type="date" pattern="dd/MM/yyyy" />
							</h:outputText>
						</p:column>
						<p:column  style="width:20px">
							<p:outputLabel  value="Telefono Contacto"  style="font-weight: bold"/>
						</p:column>
						<p:column  style="width:20px">
							<h:outputText value="#{solicitudMatrimonioDesempleo.fopagos.PTelefono_Pag}"/>
						</p:column>
						</p:row>	
					</p:panelGrid>		
						
						<p:dataTable var="verPago" value="#{solicitudMatrimonioDesempleo.fopagos}"
						emptyMessage="#{msg.aprob_msj_sinDatos}"  >
									
									<p:column headerText="Beneficiario" style="width:20px">
										<h:outputText value="#{verPago.PBenef_Re}"/>
									</p:column>
									<p:column headerText="Porc." style="width:20px">
										<h:outputText value="#{verPago.PPorcent_Re}" />
									</p:column>
									<p:column headerText="Estatus" style="width:20px">
										<h:outputText value="#{verPago.PEstatus_Re}"/>
									</p:column>
									<p:column headerText="Plaza" style="width:20px">
										<h:outputText value="#{verPago.PPlaza_Re}"/>
									</p:column>
									<p:column headerText="Monto Retiro." style="width:20px">
										<h:outputText value="#{verPago.PMonBruto_Re}" />
									</p:column>
									<p:column headerText="Monto Isr" style="width:20px">
										<h:outputText value="#{verPago.PMontoIsr_Re}"/>
									</p:column>
									<p:column headerText="Neto" style="width:20px">
										<h:outputText value="#{verPago.PMontoNeto_Re}" />
									</p:column>
									
									<p:columnGroup style="width:20px" type="footer">
						                <p:row>
						                    <p:column colspan="4" style="text-align:right" footerText="Totales:"/>
						                    <p:column style="text-align:left" footerText="$#{verPago.PMonBruto_Re}"/>
						                    <p:column style="text-align:left" footerText="$#{verPago.PMontoIsr_Re}"/>
						                    <p:column style="text-align:left" footerText="$#{verPago.PMontoNeto_Re}"/>
						                </p:row>
						            </p:columnGroup>
						
						</p:dataTable>	
						 </p:outputPanel>
						</p:dialog>
		
		<ui:include src="processResult.xhtml">
			<ui:param name="base" value="#{solicitudMatrimonioDesempleo}" />
		</ui:include>
		
		
  </h:form>
  		
  		
  
</ui:define>

</ui:composition>